{"ast":null,"code":"import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nexport function skipLast(skipCount) {\n  return skipCount <= 0 ? identity : operate(function (source, subscriber) {\n    var ring = new Array(skipCount);\n    var seen = 0;\n    source.subscribe(new OperatorSubscriber(subscriber, function (value) {\n      var valueIndex = seen++;\n\n      if (valueIndex < skipCount) {\n        ring[valueIndex] = value;\n      } else {\n        var index = valueIndex % skipCount;\n        var oldValue = ring[index];\n        ring[index] = value;\n        subscriber.next(oldValue);\n      }\n    }));\n    return function () {\n      ring = null;\n    };\n  });\n}","map":{"version":3,"mappings":"AACA,SAASA,QAAT,QAAyB,kBAAzB;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AA6CA,OAAM,SAAUC,QAAV,CAAsBC,SAAtB,EAAuC;EAC3C,OAAOA,SAAS,IAAI,CAAb,GAEHJ,QAFG,GAGHC,OAAO,CAAC,UAACI,MAAD,EAASC,UAAT,EAAmB;IAIzB,IAAIC,IAAI,GAAQ,IAAIC,KAAJ,CAAUJ,SAAV,CAAhB;IAGA,IAAIK,IAAI,GAAG,CAAX;IACAJ,MAAM,CAACK,SAAP,CACE,IAAIR,kBAAJ,CAAuBI,UAAvB,EAAmC,UAACK,KAAD,EAAM;MAKvC,IAAMC,UAAU,GAAGH,IAAI,EAAvB;;MACA,IAAIG,UAAU,GAAGR,SAAjB,EAA4B;QAI1BG,IAAI,CAACK,UAAD,CAAJ,GAAmBD,KAAnB;MACD,CALD,MAKO;QAIL,IAAME,KAAK,GAAGD,UAAU,GAAGR,SAA3B;QAGA,IAAMU,QAAQ,GAAGP,IAAI,CAACM,KAAD,CAArB;QACAN,IAAI,CAACM,KAAD,CAAJ,GAAcF,KAAd;QAKAL,UAAU,CAACS,IAAX,CAAgBD,QAAhB;MACD;IACF,CA1BD,CADF;IA8BA,OAAO;MAELP,IAAI,GAAG,IAAP;IACD,CAHD;EAID,CA1CM,CAHX;AA8CD","names":["identity","operate","OperatorSubscriber","skipLast","skipCount","source","subscriber","ring","Array","seen","subscribe","value","valueIndex","index","oldValue","next"],"sourceRoot":"","sources":["../../../../src/internal/operators/skipLast.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}