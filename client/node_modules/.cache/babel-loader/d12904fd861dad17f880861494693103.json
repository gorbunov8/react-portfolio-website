{"ast":null,"code":"import { EMPTY } from '../observable/empty';\nimport { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nexport function repeat(count) {\n  if (count === void 0) {\n    count = Infinity;\n  }\n\n  return count <= 0 ? function () {\n    return EMPTY;\n  } : operate(function (source, subscriber) {\n    var soFar = 0;\n    var innerSub;\n\n    var subscribeForRepeat = function () {\n      var syncUnsub = false;\n      innerSub = source.subscribe(new OperatorSubscriber(subscriber, undefined, function () {\n        if (++soFar < count) {\n          if (innerSub) {\n            innerSub.unsubscribe();\n            innerSub = null;\n            subscribeForRepeat();\n          } else {\n            syncUnsub = true;\n          }\n        } else {\n          subscriber.complete();\n        }\n      }));\n\n      if (syncUnsub) {\n        innerSub.unsubscribe();\n        innerSub = null;\n        subscribeForRepeat();\n      }\n    };\n\n    subscribeForRepeat();\n  });\n}","map":{"version":3,"mappings":"AACA,SAASA,KAAT,QAAsB,qBAAtB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,SAASC,kBAAT,QAAmC,sBAAnC;AAwDA,OAAM,SAAUC,MAAV,CAAoBC,KAApB,EAAoC;EAAhB;IAAAA;EAAgB;;EACxC,OAAOA,KAAK,IAAI,CAAT,GACH;IAAM;EAAK,CADR,GAEHH,OAAO,CAAC,UAACI,MAAD,EAASC,UAAT,EAAmB;IACzB,IAAIC,KAAK,GAAG,CAAZ;IACA,IAAIC,QAAJ;;IACA,IAAMC,kBAAkB,GAAG;MACzB,IAAIC,SAAS,GAAG,KAAhB;MACAF,QAAQ,GAAGH,MAAM,CAACM,SAAP,CACT,IAAIT,kBAAJ,CAAuBI,UAAvB,EAAmCM,SAAnC,EAA8C;QAC5C,IAAI,EAAEL,KAAF,GAAUH,KAAd,EAAqB;UACnB,IAAII,QAAJ,EAAc;YACZA,QAAQ,CAACK,WAAT;YACAL,QAAQ,GAAG,IAAX;YACAC,kBAAkB;UACnB,CAJD,MAIO;YACLC,SAAS,GAAG,IAAZ;UACD;QACF,CARD,MAQO;UACLJ,UAAU,CAACQ,QAAX;QACD;MACF,CAZD,CADS,CAAX;;MAgBA,IAAIJ,SAAJ,EAAe;QACbF,QAAQ,CAACK,WAAT;QACAL,QAAQ,GAAG,IAAX;QACAC,kBAAkB;MACnB;IACF,CAvBD;;IAwBAA,kBAAkB;EACnB,CA5BM,CAFX;AA+BD","names":["EMPTY","operate","OperatorSubscriber","repeat","count","source","subscriber","soFar","innerSub","subscribeForRepeat","syncUnsub","subscribe","undefined","unsubscribe","complete"],"sourceRoot":"","sources":["../../../../src/internal/operators/repeat.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}