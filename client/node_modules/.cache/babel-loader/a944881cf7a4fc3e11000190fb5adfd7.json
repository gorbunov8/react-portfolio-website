{"ast":null,"code":"import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\n\nvar Observable = function () {\n  function Observable(subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var _this = this;\n\n    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n    errorContext(function () {\n      var _a = _this,\n          operator = _a.operator,\n          source = _a.source;\n      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));\n    });\n    return subscriber;\n  };\n\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      sink.error(err);\n    }\n  };\n\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscription;\n      subscription = _this.subscribe(function (value) {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          subscription === null || subscription === void 0 ? void 0 : subscription.unsubscribe();\n        }\n      }, reject, resolve);\n    });\n  };\n\n  Observable.prototype._subscribe = function (subscriber) {\n    var _a;\n\n    return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n  };\n\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n\n  Observable.prototype.pipe = function () {\n    var operations = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n\n    return operations.length ? pipeFromArray(operations)(this) : this;\n  };\n\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n\n  return Observable;\n}();\n\nexport { Observable };\n\nfunction getPromiseCtor(promiseCtor) {\n  var _a;\n\n  return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\n\nfunction isObserver(value) {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\n\nfunction isSubscriber(value) {\n  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);\n}","map":{"version":3,"mappings":"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","names":["SafeSubscriber","Subscriber","isSubscription","observable","Symbol_observable","pipeFromArray","config","isFunction","errorContext","subscribe","_subscribe","Observable","operator","source","observerOrNext","error","complete","subscriber","isSubscriber","_this","add","call","_trySubscribe","sink","err","next","promiseCtor","getPromiseCtor","resolve","reject","subscription","value","unsubscribe","_a","operations","length","x","Promise","isObserver"],"sourceRoot":"","sources":["../../../src/internal/Observable.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}