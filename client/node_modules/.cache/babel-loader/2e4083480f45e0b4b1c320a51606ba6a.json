{"ast":null,"code":"import { Observable } from '../../Observable';\nimport { Subscription } from '../../Subscription';\nimport { performanceTimestampProvider } from '../../scheduler/performanceTimestampProvider';\nimport { animationFrameProvider } from '../../scheduler/animationFrameProvider';\nexport function animationFrames(timestampProvider) {\n  return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\n\nfunction animationFramesFactory(timestampProvider) {\n  var schedule = animationFrameProvider.schedule;\n  return new Observable(function (subscriber) {\n    var subscription = new Subscription();\n    var provider = timestampProvider || performanceTimestampProvider;\n    var start = provider.now();\n\n    var run = function (timestamp) {\n      var now = provider.now();\n      subscriber.next({\n        timestamp: timestampProvider ? now : timestamp,\n        elapsed: now - start\n      });\n\n      if (!subscriber.closed) {\n        subscription.add(schedule(run));\n      }\n    };\n\n    subscription.add(schedule(run));\n    return subscription;\n  });\n}\n\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory();","map":{"version":3,"mappings":"AAAA,SAASA,UAAT,QAA2B,kBAA3B;AACA,SAASC,YAAT,QAA6B,oBAA7B;AAEA,SAASC,4BAAT,QAA6C,8CAA7C;AACA,SAASC,sBAAT,QAAuC,wCAAvC;AA0EA,OAAM,SAAUC,eAAV,CAA0BC,iBAA1B,EAA+D;EACnE,OAAOA,iBAAiB,GAAGC,sBAAsB,CAACD,iBAAD,CAAzB,GAA+CE,wBAAvE;AACD;;AAMD,SAASD,sBAAT,CAAgCD,iBAAhC,EAAqE;EAC3D,YAAQ,GAAKF,sBAAsB,SAAnC;EACR,OAAO,IAAIH,UAAJ,CAAuD,sBAAU;IACtE,IAAMQ,YAAY,GAAG,IAAIP,YAAJ,EAArB;IAIA,IAAMQ,QAAQ,GAAGJ,iBAAiB,IAAIH,4BAAtC;IAKA,IAAMQ,KAAK,GAAGD,QAAQ,CAACE,GAAT,EAAd;;IACA,IAAMC,GAAG,GAAG,UAACC,SAAD,EAAwC;MAQlD,IAAMF,GAAG,GAAGF,QAAQ,CAACE,GAAT,EAAZ;MACAG,UAAU,CAACC,IAAX,CAAgB;QACdF,SAAS,EAAER,iBAAiB,GAAGM,GAAH,GAASE,SADvB;QAEdG,OAAO,EAAEL,GAAG,GAAGD;MAFD,CAAhB;;MAIA,IAAI,CAACI,UAAU,CAACG,MAAhB,EAAwB;QACtBT,YAAY,CAACU,GAAb,CAAiBC,QAAQ,CAACP,GAAD,CAAzB;MACD;IACF,CAhBD;;IAiBAJ,YAAY,CAACU,GAAb,CAAiBC,QAAQ,CAACP,GAAD,CAAzB;IACA,OAAOJ,YAAP;EACD,CA9BM,CAAP;AA+BD;;AAMD,IAAMD,wBAAwB,GAAGD,sBAAsB,EAAvD","names":["Observable","Subscription","performanceTimestampProvider","animationFrameProvider","animationFrames","timestampProvider","animationFramesFactory","DEFAULT_ANIMATION_FRAMES","subscription","provider","start","now","run","timestamp","subscriber","next","elapsed","closed","add","schedule"],"sourceRoot":"","sources":["../../../../../src/internal/observable/dom/animationFrames.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}